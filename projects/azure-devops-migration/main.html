<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Migration Azure DevOps ‚Üí GitLab CI/CD Homelab</title>
    <link rel="stylesheet" href="../../assets/css/style.css" />
    <style>
        .tech-container {
            max-width: 900px;
            margin: 0 auto;
            text-align: left;
            color: #2c2c2c;
        }
        .back-nav {
            text-align: center;
            margin-bottom: 30px;
        }
        .back-link {
            color: #2c2c2c;
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid #2c2c2c;
            transition: all 0.3s ease;
            margin: 0 10px;
            border-radius: 6px;
        }
        .back-link:hover {
            background-color: #2c2c2c;
            color: white;
        }
        .section {
            margin: 40px 0;
            padding: 30px;
            background-color: rgba(255,255,255,0.1);
            border-left: 4px solid #2c2c2c;
        }
        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            border-bottom: 2px solid #2c2c2c;
            padding-bottom: 10px;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 25px 0;
        }
        .comparison-card {
            padding: 22px 18px;
            background: rgba(44,44,44,0.07);
            border-radius: 8px;
            border-left: 4px solid #dc3545;
            box-shadow: 0 1px 6px rgba(44,44,44,0.10);
        }
        .comparison-card.after {
            border-left-color: #28a745;
        }
        .comparison-card h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .tech-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }
        .tech-card {
            padding: 22px 18px;
            background: rgba(44,44,44,0.07);
            border-radius: 8px;
            border-left: 4px solid #2c2c2c;
            box-shadow: 0 1px 6px rgba(44,44,44,0.10);
            transition: transform 0.2s;
        }
        .tech-card:hover {
            transform: translateY(-4px) scale(1.02);
            background-color: rgba(44,44,44,0.15);
        }
        .tech-card-title {
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.13em;
            color: #2c2c2c;
            margin-bottom: 15px;
        }
        .tech-card-desc {
            font-size: 1em;
            margin-bottom: 15px;
            color: #444;
        }
        .file-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .file-link {
            color: #2c2c2c;
            font-weight: bold;
            text-decoration: none;
            padding: 12px 18px;
            border: 1px solid #2c2c2c;
            border-radius: 6px;
            transition: all 0.25s;
            text-align: center;
        }
        .file-link:hover {
            background: #2c2c2c;
            color: white;
        }
        .highlight-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .sources {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 40px 0;
            font-size: 0.9em;
        }
        .sources h3 {
            margin-top: 0;
            color: #2c2c2c;
        }
        .sources a {
            color: #4fc3f7;
            text-decoration: none;
        }
        .sources a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="overlay">
        <div class="tech-container">
            <div class="back-nav">
                <a href="../../index.html" class="back-link">üè† Accueil</a>
            </div>

            <h1 style="text-align: center; margin-bottom: 40px;">üîÑ Migration Azure DevOps ‚Üí GitLab CI/CD Homelab</h1>

            <div class="section">
                <h2 class="section-title">üìã Contexte du Projet</h2>
                <p><strong>Objectif :</strong> Migrer un environnement de d√©veloppement d'Azure DevOps vers une solution self-hosted GitLab CI/CD sur infrastructure Kubernetes Talos.</p>
                
                <p><strong>Infrastructure cible :</strong></p>
                <ul>
                    <li>Hyperviseur Proxmox VE</li>
                    <li>Cluster Kubernetes Talos (3 control planes + 3 workers)</li>
                    <li>Stack GitOps avec ArgoCD et ApplicationSets</li>
                    <li>CNI Cilium avec cert-manager</li>
                </ul>

                <div class="highlight-box">
                    <strong>Note :</strong> Il s'agit d'un environnement de homelab √† des fins d'apprentissage et d'exp√©rimentation, pas d'un environnement de production.
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">‚öñÔ∏è Comparaison des Solutions</h2>
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h3>üî¥ Azure DevOps</h3>
                        <strong>Secrets Management :</strong><br>
                        ‚Ä¢ Azure Key Vault<br>
                        ‚Ä¢ Sealed-Secrets Kubernetes<br>
                        ‚Ä¢ Gestion manuelle des rotations<br><br>
                        
                        <strong>CI/CD :</strong><br>
                        ‚Ä¢ Azure Pipelines<br>
                        ‚Ä¢ Agents cloud ou self-hosted<br>
                        ‚Ä¢ Facturation par minutes pipeline<br><br>
                        
                        <strong>Caract√©ristiques :</strong><br>
                        ‚Ä¢ Solution cloud native<br>
                        ‚Ä¢ Int√©gration Microsoft ecosystem<br>
                        ‚Ä¢ Maintenance g√©r√©e par Microsoft
                    </div>
                    
                    <div class="comparison-card after">
                        <h3>üü¢ GitLab CI + Vault</h3>
                        <strong>Secrets Management :</strong><br>
                        ‚Ä¢ HashiCorp Vault<br>
                        ‚Ä¢ External Secrets Operator<br>
                        ‚Ä¢ Rotation automatique configurable<br><br>
                        
                        <strong>CI/CD :</strong><br>
                        ‚Ä¢ GitLab Runner on Kubernetes<br>
                        ‚Ä¢ Executor Kubernetes (pods √©ph√©m√®res)<br>
                        ‚Ä¢ Infrastructure self-hosted<br><br>
                        
                        <strong>Caract√©ristiques :</strong><br>
                        ‚Ä¢ Contr√¥le total de l'infrastructure<br>
                        ‚Ä¢ Solution agnostique cloud<br>
                        ‚Ä¢ Maintenance self-service
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">üèóÔ∏è Architecture Technique Impl√©ment√©e</h2>
                <div class="tech-list">
                    <div class="tech-card">
                        <div class="tech-card-title">üéØ GitOps avec ArgoCD</div>
                        <div class="tech-card-desc">D√©ploiement GitOps via ApplicationSets avec pattern app-of-apps pour gestion centralis√©e.</div>
                    </div>
                    
                    <div class="tech-card">
                        <div class="tech-card-title">üîê HashiCorp Vault</div>
                        <div class="tech-card-desc">Secret management avec UI web, policies RBAC et int√©gration Kubernetes native.</div>
                    </div>
                    
                    <div class="tech-card">
                        <div class="tech-card-title">üöÄ GitLab Runner</div>
                        <div class="tech-card-desc">D√©ploiement dans Kubernetes avec executor Kubernetes pour isolation des jobs.</div>
                    </div>
                    
                    <div class="tech-card">
                        <div class="tech-card-title">üîó External Secrets Operator</div>
                        <div class="tech-card-desc">Synchronisation automatique Vault vers Kubernetes Secrets avec gestion TTL.</div>
                    </div>
                    
                    <div class="tech-card">
                        <div class="tech-card-title">üåê Cilium CNI</div>
                        <div class="tech-card-desc">CNI eBPF avec LoadBalancer L2, cert-manager pour TLS automatique.</div>
                    </div>
                    
                    <div class="tech-card">
                        <div class="tech-card-title">üîß ApplicationSet Pattern</div>
                        <div class="tech-card-desc">Auto-discovery d'applications via fichiers de configuration JSON simplifi√©s.</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">üõ°Ô∏è Aspects DevSecOps</h2>
                
                <h3>Am√©liorations S√©curit√© :</h3>
                <ul>
                    <li><strong>Isolation des jobs :</strong> Chaque pipeline s'ex√©cute dans un pod √©ph√©m√®re isol√©</li>
                    <li><strong>Secret rotation :</strong> Configuration TTL automatique via Vault (vs gestion manuelle)</li>
                    <li><strong>Audit trail :</strong> Logging complet des acc√®s aux secrets via Vault</li>
                    <li><strong>RBAC granulaire :</strong> Policies Vault par service et environnement</li>
                    <li><strong>No secrets in Git :</strong> Secrets inject√©s dynamiquement via External Secrets Operator</li>
                </ul>

                <h3>Configuration Pipeline :</h3>
                <ul>
                    <li><strong>Resource limits :</strong> CPU et m√©moire limit√©es par job</li>
                    <li><strong>Node affinity :</strong> Ex√©cution sur workers uniquement</li>
                    <li><strong>Network policies :</strong> Restrictions r√©seau via Cilium (si configur√©es)</li>
                </ul>
            </div>

            <div class="section">
                <h2 class="section-title">üìÅ Fichiers de Configuration</h2>
                <div class="file-links">
                    <a href="vault-config.yml" class="file-link">üîê Configuration Vault</a>
                    <a href="gitlab-ci-examples.yml" class="file-link">üöÄ Exemples Pipelines GitLab CI</a>
                </div>
            </div>

            <div class="sources">
                <h3>üîó Sources et Documentation</h3>
                <ul>
                    <li><a href="https://docs.gitlab.com/runner/executors/kubernetes.html" target="_blank">GitLab Runner Kubernetes Executor Documentation</a></li>
                    <li><a href="https://external-secrets.io/latest/provider/hashicorp-vault/" target="_blank">External Secrets Operator - Vault Provider</a></li>
                    <li><a href="https://developer.hashicorp.com/vault/docs/platform/k8s" target="_blank">HashiCorp Vault Kubernetes Integration</a></li>
                    <li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/applicationset/" target="_blank">ArgoCD ApplicationSets Documentation</a></li>
                    <li><a href="https://docs.cilium.io/en/stable/" target="_blank">Cilium Documentation</a></li>
                </ul>
            </div>

        </div>
    </div>
</body>
</html>
